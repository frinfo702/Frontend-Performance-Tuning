# Frontend Performance Tuning

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ã®å®Ÿè·µãƒªãƒã‚¸ãƒˆãƒªã€‚æ„å›³çš„ã«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ä½ä¸‹ã•ã›ãŸãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸ã‚’ç”¨æ„ã—ã€æ§˜ã€…ãªæœ€é©åŒ–æ‰‹æ³•ã‚’é©ç”¨ã—ã¦æ”¹å–„åŠ¹æœã‚’æ¤œè¨¼ã—ã¾ã™ã€‚

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
Frontend-Performance-Tuning/
â”œâ”€â”€ demo/                    # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ index.html          # ãƒ¡ã‚¤ãƒ³HTML
â”‚   â”œâ”€â”€ app.js              # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ styles.css          # ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ assets/             # ç”»åƒãƒªã‚½ãƒ¼ã‚¹
â”‚   â”‚   â”œâ”€â”€ hero.svg
â”‚   â”‚   â””â”€â”€ thumb.svg
â”‚   â”œâ”€â”€ trace-cold.json.gz      # æ”¹å–„å‰ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¹
â”‚   â””â”€â”€ trace-optimized.json.gz # æ”¹å–„å¾Œã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¹
â”œâ”€â”€ .claude/skills/         # Claude Code ã‚¹ã‚­ãƒ«å®šç¾©
â””â”€â”€ README.md               # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

## ğŸ¯ ç›®çš„

ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã¯ä»¥ä¸‹ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ï¼š

1. **å­¦ç¿’ç”¨ãƒªã‚½ãƒ¼ã‚¹**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å…¸å‹çš„ãªå•é¡Œã¨ãã®è§£æ±ºæ–¹æ³•ã‚’å­¦ã¶
2. **ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯**: æ§˜ã€…ãªæœ€é©åŒ–æ‰‹æ³•ã®åŠ¹æœã‚’å®šé‡çš„ã«æ¸¬å®šã™ã‚‹
3. **ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹**: Core Web Vitalsæ”¹å–„ã®ãŸã‚ã®å®Ÿè·µçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ç¤ºã™

## ğŸš€ å®Ÿæ–½ã—ãŸæœ€é©åŒ–

### Phase 1: FCPï¼ˆFirst Contentful Paintï¼‰æ”¹å–„

#### æ”¹å–„å‰ã®å•é¡Œç‚¹

- Google Fonts (93.4kB) ãŒãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°
- å¤–éƒ¨CSSãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°
- ä¸è¦ãªvendor.js (12,000è¦ç´ é…åˆ—ç”Ÿæˆ)
- éå‰°ãªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

#### å®Ÿæ–½ã—ãŸå¯¾ç­–

| å¯¾ç­–                            | åŠ¹æœ                     | é›£æ˜“åº¦ |
| ------------------------------- | ------------------------ | ------ |
| Google Fonts â†’ ã‚·ã‚¹ãƒ†ãƒ ãƒ•ã‚©ãƒ³ãƒˆ | 93.4kBå‰Šæ¸›               | ä½     |
| ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«CSSã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–     | FCPãƒ–ãƒ­ãƒƒã‚¯è§£æ¶ˆ          | ä¸­     |
| éã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«CSSé…å»¶ãƒ­ãƒ¼ãƒ‰     | ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°é™¤å» | ä¸­     |
| vendor.jså‰Šé™¤                   | JSå®Ÿè¡Œæ™‚é–“å‰Šæ¸›           | ä½     |
| ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å‰Šé™¤    | DOMæ“ä½œå‰Šæ¸›              | ä½     |

#### æ”¹å–„çµæœ

| ãƒ¡ãƒˆãƒªã‚¯ã‚¹                       | Before | After    | æ”¹å–„ç‡       |
| -------------------------------- | ------ | -------- | ------------ |
| **ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ãƒªã‚½ãƒ¼ã‚¹** | 2ä»¶    | **0ä»¶**  | **100%å‰Šæ¸›** |
| **è»¢é€ã‚µã‚¤ã‚º**                   | ~100kB | **~8kB** | **92%å‰Šæ¸›**  |
| **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**       | 9ä»¶    | **5ä»¶**  | **44%å‰Šæ¸›**  |
| LCP                              | 42ms   | 111ms    | -            |
| TTFB                             | 0.9ms  | 2ms      | -            |
| CLS                              | 0.00   | 0.00     | å¤‰åŒ–ãªã—     |
| INP                              | 1ms    | 4ms      | -            |

> **Note**: LCPãŒå¢—åŠ ã—ã¦ã„ã‚‹ã®ã¯ã€LCPè¦ç´ ãŒ`hero.svg`ã‹ã‚‰`thumb.svg`ã«å¤‰æ›´ã•ã‚ŒãŸãŸã‚ï¼ˆã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«CSSæœ€é©åŒ–ã®å‰¯ä½œç”¨ï¼‰ã€‚FCPã¯å¤§å¹…ã«æ”¹å–„ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ’» ä½¿ã„æ–¹

### 1. ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸ã®èµ·å‹•

```bash
cd demo
python3 -m http.server 8080
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ `http://localhost:8080` ã«ã‚¢ã‚¯ã‚»ã‚¹

### 2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š

#### Chrome DevTools Performance Panel

1. DevToolsã‚’é–‹ã (F12)
2. Performanceã‚¿ãƒ–ã‚’é¸æŠ
3. è¨˜éŒ²ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
4. ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰
5. è¨˜éŒ²ã‚’åœæ­¢ã—ã¦åˆ†æ

#### Lighthouse

```bash
npx lighthouse http://localhost:8080 \
  --preset=desktop \
  --output=html \
  --output-path=./lighthouse-report.html
```

#### Claude Code ã‚¹ã‚­ãƒ« (æ¨å¥¨)

```bash
# Claude Code CLIã§
/frontend-perf-tuner
```

è‡ªå‹•çš„ã«ä»¥ä¸‹ã‚’å®Ÿè¡Œ:

- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¹å–å¾—
- ãƒœãƒˆãƒ«ãƒãƒƒã‚¯åˆ†æ
- æ”¹å–„ææ¡ˆ
- å†è¨ˆæ¸¬

### 3. ãƒˆãƒ¬ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª

```bash
# æ”¹å–„å‰
demo/trace-cold.json.gz

# æ”¹å–„å¾Œ
demo/trace-optimized.json.gz
```

Chrome DevTools Performance > Load Profileã‹ã‚‰èª­ã¿è¾¼ã‚“ã§æ¯”è¼ƒå¯èƒ½

## ğŸ“Š ä¸»è¦ãªå­¦ã³

### FCPæ”¹å–„ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«CSSã®ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–**
   - Above-the-foldã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã‚¹ã‚¿ã‚¤ãƒ«ã®ã¿`<style>`ã‚¿ã‚°å†…ã«
   - æ®‹ã‚Šã¯éåŒæœŸãƒ­ãƒ¼ãƒ‰

2. **ã‚·ã‚¹ãƒ†ãƒ ãƒ•ã‚©ãƒ³ãƒˆã®æ´»ç”¨**

   ```css
   font-family:
     -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans JP", sans-serif;
   ```

   - Web Fontã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ™‚é–“ã‚’å®Œå…¨ã«å‰Šæ¸›
   - FOUT/FOITå•é¡Œã®å›é¿

3. **éåŒæœŸCSSèª­ã¿è¾¼ã¿**

   ```html
   <link
     rel="preload"
     href="styles.css"
     as="style"
     onload="this.onload=null;this.rel='stylesheet'"
   />
   <noscript><link rel="stylesheet" href="styles.css" /></noscript>
   ```

4. **ä¸è¦ãªJavaScriptå‰Šé™¤**
   - ä½¿ã‚ã‚Œã¦ã„ãªã„vendor.jså‰Šé™¤
   - éå‰°ãªã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©å‰Šé™¤

### ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ãƒªã‚½ãƒ¼ã‚¹å‰Šæ¸›ã®é‡è¦æ€§

- **Before**: Google Fonts CSS + styles.css = 2ä»¶ã®ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°
- **After**: 0ä»¶
- **çµæœ**: ãƒ–ãƒ©ã‚¦ã‚¶ãŒå³åº§ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é–‹å§‹å¯èƒ½

## ğŸ› ï¸ é–‹ç™ºãƒ„ãƒ¼ãƒ«

### Claude Code Skills

ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã«ã¯å°‚ç”¨ã®Claude Codeã‚¹ã‚­ãƒ«ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ï¼š

- **frontend-perf-tuner**: E2Eãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
  - è¨ˆæ¸¬ â†’ è¨ºæ–­ â†’ æ”¹å–„ææ¡ˆ â†’ å†è¨ˆæ¸¬ â†’ å›å¸°é˜²æ­¢

### å¿…è¦ãªãƒ„ãƒ¼ãƒ«

- Python 3 (HTTPã‚µãƒ¼ãƒãƒ¼ç”¨)
- Chrome/Chromium (DevTools)
- Node.js (Lighthouseç”¨ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³)

## ğŸ“ˆ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### ã•ã‚‰ãªã‚‹æ”¹å–„æ¡ˆ

1. **ç”»åƒæœ€é©åŒ–**
   - SVGã‚’minify
   - WebP/AVIFå½¢å¼ã¸ã®å¤‰æ›
   - é©åˆ‡ãªã‚µã‚¤ã‚ºã¸ã®ãƒªã‚µã‚¤ã‚º

2. **ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥**
   - Cache-Controlãƒ˜ãƒƒãƒ€ãƒ¼è¨­å®š
   - Service Workerå°å…¥

3. **ã‚³ãƒ¼ãƒ‰åˆ†å‰²**
   - Dynamic import
   - Route-based splitting

4. **æœ¬ç•ªç’°å¢ƒæœ€é©åŒ–**
   - Gzip/Brotliåœ§ç¸®
   - CDNé…ä¿¡
   - HTTP/2 Server Push

## ğŸ“š å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

- [Web Vitals](https://web.dev/vitals/)
- [Chrome DevTools Performance](https://developer.chrome.com/docs/devtools/performance/)
- [Lighthouse Performance Scoring](https://developer.chrome.com/docs/lighthouse/performance/performance-scoring/)
- [Critical Rendering Path](https://developer.chrome.com/docs/lighthouse/performance/critical-request-chains/)

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯å­¦ç¿’ãƒ»ç ”ç©¶ç›®çš„ã§è‡ªç”±ã«ä½¿ç”¨ã§ãã¾ã™ã€‚

---

**Last Updated**: 2026-02-02
**Performance Optimization**: FCP-focused optimization completed
